{"title":"JavaWeb学习之路（三）——基本请求处理","slug":"JavaWeb学习之路（三）——基本请求处理","date":"2021-05-01T13:40:32.000Z","updated":"2021-05-01T16:08:54.856Z","comments":true,"path":"api/articles/JavaWeb学习之路（三）——基本请求处理.json","excerpt":null,"covers":["../img/image-20210501221142975.png"],"content":"<h2 id=\"接收参数\"><a href=\"#接收参数\" class=\"headerlink\" title=\"接收参数\"></a>接收参数</h2><ul>\n<li><p>接收单个参数</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String username = request.getParameter(<span class=\"string\">&quot;username&quot;</span>);</span><br></pre></td></tr></table></figure></li>\n<li><p>接收多个参数【前端使用checkbox等，产生数组】</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String[] hobbies = request.getParameterValues(<span class=\"string\">&quot;hobby&quot;</span>);</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"设置请求转发\"><a href=\"#设置请求转发\" class=\"headerlink\" title=\"设置请求转发\"></a>设置请求转发</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">request.getRequestDispatcher(<span class=\"string\">&quot;success.jsp&quot;</span>).forward(request, response);</span><br></pre></td></tr></table></figure>\n\n<p><img src= \"/img/loading.gif\" data-lazy-src=\"../img/image-20210501221142975.png\" alt=\"image-20210501221142975\"></p>\n<ul>\n<li><p>参考：<a href=\"https://blog.csdn.net/hju22/article/details/86734703\">重定向</a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">response.sendRedirect(<span class=\"string\">&quot;/hello/home.html&quot;</span>);</span><br></pre></td></tr></table></figure></li>\n<li><p><strong>请求转发是使用request，而重定向使用response</strong>。</p>\n</li>\n<li><p>请求转发状态码：302，重定向状态码：307。</p>\n</li>\n<li><p>请求转发url不会发生改变，重定向url会改变。</p>\n</li>\n</ul>\n<h2 id=\"小Tip\"><a href=\"#小Tip\" class=\"headerlink\" title=\"小Tip\"></a>小Tip</h2><ul>\n<li><p>处理中文显示乱码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">request.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">response.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">response.setContentType(<span class=\"string\">&quot;text/html;charset-utf-8&quot;</span>);</span><br></pre></td></tr></table></figure></li>\n<li><p><a href=\"https://blog.csdn.net/u013084858/article/details/82768086\">java对URL进行编码和解码_平静的大海-CSDN博客_java url编码</a></p>\n</li>\n</ul>\n<h2 id=\"ConText\"><a href=\"#ConText\" class=\"headerlink\" title=\"ConText\"></a>ConText</h2><p><a href=\"https://blog.csdn.net/dawiebazhanlang/article/details/79642549\">java web 中关于ConText的简介_码上人生的博客-CSDN博客</a></p>\n<p><a href=\"https://www.jianshu.com/p/31d27181d542\">JavaWeb–ServletContext - 简书 (jianshu.com)</a></p>\n<h2 id=\"Cookie和Session\"><a href=\"#Cookie和Session\" class=\"headerlink\" title=\"Cookie和Session\"></a>Cookie和Session</h2><ul>\n<li>区别：<a href=\"https://www.cnblogs.com/l199616j/p/11195667.html\">cookie和session的详解与区别 - 测试开发喵 - 博客园 (cnblogs.com)</a></li>\n<li>cookie:信息在浏览器保存；session：信息在服务器保存</li>\n</ul>\n<h3 id=\"Cookie\"><a href=\"#Cookie\" class=\"headerlink\" title=\"Cookie\"></a>Cookie</h3><ul>\n<li><p>Cookie:请求中获得到cookie，服务器响应。</p>\n</li>\n<li><p>一个web站点最多存放<strong>20</strong>个cookie，大小限制<strong>4</strong>kb，<strong>300</strong>个cookie浏览器上限。</p>\n</li>\n<li><p>```java<br>Cookie[] cookies = request.getCookies();<br>if (cookies != null){</p>\n<pre><code>for (Cookie cookie : cookies) &#123;\n    if (cookie.getName().equals(&quot;lastLoginTime&quot;)) &#123;\n        long l = Long.parseLong(cookie.getValue());\n        Date date = new Date(l);\n        writer.write(&quot;现在是&quot;+date.toLocaleString());\n    &#125;\n&#125;\n</code></pre>\n<p>} else {</p>\n<pre><code>writer.write(&quot;第一次访问&quot;);\n</code></pre>\n<p>}<br>Cookie cookie = new Cookie(“lastLoginTime”, System.currentTimeMillis()+””);<br>cookie.setMaxAge(24<em>60</em>60);<br>response.addCookie(cookie);</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">- &#96;&#96;&#96;</span><br><span class=\"line\">  Set-Cookie: lastLoginTime&#x3D;1619883448706; Max-Age&#x3D;86400; Expires&#x3D;Sun, 02-May-2021 15:37:28 GMT</span><br></pre></td></tr></table></figure></li>\n<li><p>删除cookie：设置一个同名cookie，有效期设置为0。</p>\n</li>\n</ul>\n<h3 id=\"Session\"><a href=\"#Session\" class=\"headerlink\" title=\"Session\"></a>Session</h3><ul>\n<li><p>服务器会为每位用户（浏览器）创建一个Session对象。一个Session独占一个浏览器。</p>\n</li>\n<li><p>session可以存储对象。</p>\n</li>\n<li><p>```java<br>HttpSession session = request.getSession();<br>session.setAttribute(“name”, “HUII”);<br>String sessionId = session.getId();<br>if (session.isNew()){</p>\n<pre><code>response.getWriter().write(&quot;创建成功&quot;+sessionId);\n</code></pre>\n<p>} else {</p>\n<pre><code>response.getWriter().write(&quot;已存在&quot;+sessionId);\n</code></pre>\n<p>}</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">- &#96;&#96;&#96;</span><br><span class=\"line\">  Set-Cookie: JSESSIONID&#x3D;C222FB743499A0BA36C8B737CED42FFB; Path&#x3D;&#x2F;javaweb3_war; HttpOnly</span><br></pre></td></tr></table></figure></li>\n<li><p>删除某个</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">session.removeAttribute(<span class=\"string\">&quot;name&quot;</span>);</span><br></pre></td></tr></table></figure></li>\n<li><p>手动注销，清除所有内容（同时生成新的）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">session.invalidate();</span><br></pre></td></tr></table></figure></li>\n<li><pre><code class=\"xml\">&lt;web-app&gt;\n    &lt;session-config&gt;\n        &lt;!--失效时间，以分钟为单位--&gt;\n        &lt;session-timeout&gt;15&lt;/session-timeout&gt;\n    &lt;/session-config&gt;\n&lt;/web-app&gt;\n</code></pre>\n</li>\n</ul>\n","more":"<h2 id=\"接收参数\"><a href=\"#接收参数\" class=\"headerlink\" title=\"接收参数\"></a>接收参数</h2><ul>\n<li><p>接收单个参数</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String username = request.getParameter(<span class=\"string\">&quot;username&quot;</span>);</span><br></pre></td></tr></table></figure></li>\n<li><p>接收多个参数【前端使用checkbox等，产生数组】</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String[] hobbies = request.getParameterValues(<span class=\"string\">&quot;hobby&quot;</span>);</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"设置请求转发\"><a href=\"#设置请求转发\" class=\"headerlink\" title=\"设置请求转发\"></a>设置请求转发</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">request.getRequestDispatcher(<span class=\"string\">&quot;success.jsp&quot;</span>).forward(request, response);</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"../img/image-20210501221142975.png\" alt=\"image-20210501221142975\"></p>\n<ul>\n<li><p>参考：<a href=\"https://blog.csdn.net/hju22/article/details/86734703\">重定向</a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">response.sendRedirect(<span class=\"string\">&quot;/hello/home.html&quot;</span>);</span><br></pre></td></tr></table></figure></li>\n<li><p><strong>请求转发是使用request，而重定向使用response</strong>。</p>\n</li>\n<li><p>请求转发状态码：302，重定向状态码：307。</p>\n</li>\n<li><p>请求转发url不会发生改变，重定向url会改变。</p>\n</li>\n</ul>\n<h2 id=\"小Tip\"><a href=\"#小Tip\" class=\"headerlink\" title=\"小Tip\"></a>小Tip</h2><ul>\n<li><p>处理中文显示乱码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">request.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">response.setCharacterEncoding(<span class=\"string\">&quot;UTF-8&quot;</span>);</span><br><span class=\"line\">response.setContentType(<span class=\"string\">&quot;text/html;charset-utf-8&quot;</span>);</span><br></pre></td></tr></table></figure></li>\n<li><p><a href=\"https://blog.csdn.net/u013084858/article/details/82768086\">java对URL进行编码和解码_平静的大海-CSDN博客_java url编码</a></p>\n</li>\n</ul>\n<h2 id=\"ConText\"><a href=\"#ConText\" class=\"headerlink\" title=\"ConText\"></a>ConText</h2><p><a href=\"https://blog.csdn.net/dawiebazhanlang/article/details/79642549\">java web 中关于ConText的简介_码上人生的博客-CSDN博客</a></p>\n<p><a href=\"https://www.jianshu.com/p/31d27181d542\">JavaWeb–ServletContext - 简书 (jianshu.com)</a></p>\n<h2 id=\"Cookie和Session\"><a href=\"#Cookie和Session\" class=\"headerlink\" title=\"Cookie和Session\"></a>Cookie和Session</h2><ul>\n<li>区别：<a href=\"https://www.cnblogs.com/l199616j/p/11195667.html\">cookie和session的详解与区别 - 测试开发喵 - 博客园 (cnblogs.com)</a></li>\n<li>cookie:信息在浏览器保存；session：信息在服务器保存</li>\n</ul>\n<h3 id=\"Cookie\"><a href=\"#Cookie\" class=\"headerlink\" title=\"Cookie\"></a>Cookie</h3><ul>\n<li><p>Cookie:请求中获得到cookie，服务器响应。</p>\n</li>\n<li><p>一个web站点最多存放<strong>20</strong>个cookie，大小限制<strong>4</strong>kb，<strong>300</strong>个cookie浏览器上限。</p>\n</li>\n<li><p>```java<br>Cookie[] cookies = request.getCookies();<br>if (cookies != null){</p>\n<pre><code>for (Cookie cookie : cookies) &#123;\n    if (cookie.getName().equals(&quot;lastLoginTime&quot;)) &#123;\n        long l = Long.parseLong(cookie.getValue());\n        Date date = new Date(l);\n        writer.write(&quot;现在是&quot;+date.toLocaleString());\n    &#125;\n&#125;\n</code></pre>\n<p>} else {</p>\n<pre><code>writer.write(&quot;第一次访问&quot;);\n</code></pre>\n<p>}<br>Cookie cookie = new Cookie(“lastLoginTime”, System.currentTimeMillis()+””);<br>cookie.setMaxAge(24<em>60</em>60);<br>response.addCookie(cookie);</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">- &#96;&#96;&#96;</span><br><span class=\"line\">  Set-Cookie: lastLoginTime&#x3D;1619883448706; Max-Age&#x3D;86400; Expires&#x3D;Sun, 02-May-2021 15:37:28 GMT</span><br></pre></td></tr></table></figure></li>\n<li><p>删除cookie：设置一个同名cookie，有效期设置为0。</p>\n</li>\n</ul>\n<h3 id=\"Session\"><a href=\"#Session\" class=\"headerlink\" title=\"Session\"></a>Session</h3><ul>\n<li><p>服务器会为每位用户（浏览器）创建一个Session对象。一个Session独占一个浏览器。</p>\n</li>\n<li><p>session可以存储对象。</p>\n</li>\n<li><p>```java<br>HttpSession session = request.getSession();<br>session.setAttribute(“name”, “HUII”);<br>String sessionId = session.getId();<br>if (session.isNew()){</p>\n<pre><code>response.getWriter().write(&quot;创建成功&quot;+sessionId);\n</code></pre>\n<p>} else {</p>\n<pre><code>response.getWriter().write(&quot;已存在&quot;+sessionId);\n</code></pre>\n<p>}</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">- &#96;&#96;&#96;</span><br><span class=\"line\">  Set-Cookie: JSESSIONID&#x3D;C222FB743499A0BA36C8B737CED42FFB; Path&#x3D;&#x2F;javaweb3_war; HttpOnly</span><br></pre></td></tr></table></figure></li>\n<li><p>删除某个</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">session.removeAttribute(<span class=\"string\">&quot;name&quot;</span>);</span><br></pre></td></tr></table></figure></li>\n<li><p>手动注销，清除所有内容（同时生成新的）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">session.invalidate();</span><br></pre></td></tr></table></figure></li>\n<li><pre><code class=\"xml\">&lt;web-app&gt;\n    &lt;session-config&gt;\n        &lt;!--失效时间，以分钟为单位--&gt;\n        &lt;session-timeout&gt;15&lt;/session-timeout&gt;\n    &lt;/session-config&gt;\n&lt;/web-app&gt;\n</code></pre>\n</li>\n</ul>\n","categories":[{"name":"Coding","path":"api/categories/Coding.json"}],"tags":[{"name":"IDEA","path":"api/tags/IDEA.json"},{"name":"Java","path":"api/tags/Java.json"},{"name":"Web","path":"api/tags/Web.json"},{"name":"Tomcat","path":"api/tags/Tomcat.json"}]}